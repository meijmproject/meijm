/**
 * @desctiption   This file is generated by  code generation tool version 0.2 ^_^
 * @Created   2017-03-20
**/
package com.yh.hr.res.pb.service.impl;

import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

import org.springframework.util.CollectionUtils;

import com.yh.hr.res.pb.bo.PbPersonIn;
import com.yh.hr.res.pb.dto.PbPersonInDTO;
import com.yh.hr.res.pb.service.PbPersonInService;
import com.yh.platform.core.dao.DaoUtil;
import com.yh.platform.core.exception.ServiceException;
import com.yh.platform.core.util.BeanHelper;

public class PbPersonInServiceImpl implements PbPersonInService{
	public void create(PbPersonInDTO jhcPbPersonInDto) throws ServiceException {
		PbPersonIn jhcPbPersonIn = new PbPersonIn();
		BeanHelper.copyProperties(jhcPbPersonInDto, jhcPbPersonIn);
        jhcPbPersonIn.save();
        PersonAttachInfoServiceUtil.sysPbInInfo(jhcPbPersonInDto.getPersonOid());
	}

	public PbPersonInDTO get(java.lang.Long jhcPbPersonInId) throws ServiceException {
        return BeanHelper.copyProperties(DaoUtil.get(PbPersonIn.class, jhcPbPersonInId),PbPersonInDTO.class);
	}
    
	public void update(PbPersonInDTO jhcPbPersonInDto) throws ServiceException {

		PbPersonIn jhcPbPersonIn = new PbPersonIn();
		BeanHelper.copyProperties(jhcPbPersonInDto, jhcPbPersonIn);
		jhcPbPersonIn.update();
		PersonAttachInfoServiceUtil.sysPbInInfo(jhcPbPersonInDto.getPersonOid());
	}
    
	public void delete(java.lang.Long jhcPbPersonInId) throws ServiceException {
	  PbPersonIn bo = DaoUtil.get(PbPersonIn.class, jhcPbPersonInId);
	  if(null != bo)
	  {
		  bo.delete();
	      PersonAttachInfoServiceUtil.sysPbInInfo(bo.getPersonOid());
	  }
	}

	public List<PbPersonInDTO> listPbPersonInByPersonOid(Long personOid) throws ServiceException {
		String hql = "from PbPersonIn fi where fi.personOid = :personOid";
		Map<String, Object> params = new HashMap<String, Object>();
		params.put("personOid", personOid);
		List<PbPersonIn> boList = DaoUtil.find(hql, params);
		List<PbPersonInDTO> dtoList = new ArrayList<PbPersonInDTO>();
		
		if(!CollectionUtils.isEmpty(boList))
		{
			for(PbPersonIn bo : boList)
			{
				PbPersonInDTO dto = new PbPersonInDTO();
				BeanHelper.copyProperties(bo, dto);
				dtoList.add(dto);
			}
		}
		return dtoList;
	}

	public void deleteByPersonOid(Long personOid) throws ServiceException {
		DaoUtil.executeUpdate("delete from PbPersonIn where personOid='"+personOid+"'");
	}
}